<!DOCTYPE html>
<html>
<head>
	<title>Robot Soul</title>
	<link rel="stylesheet" type="text/css" href="../public/css/init.css">

	<script type="text/javascript" src="../PINE/PINE_Core_4.2.js"></script>
	<script type="text/javascript" src="../PINE/PINE_Var.js"></script>
	<script type="text/javascript" src="../PINE/PINE_Needles.js"></script>
	<script type="text/javascript" src="../PINE/PINE_Includes.js"></script>
	<script type="text/javascript" src="../public/js/WebMIDIAPI.min.js"></script>
	<!-- <needle src="../PINE/needles/suggestions.html"></needle>
	<needle src="../PINE/needles/selectablelist.html"></needle>
	<needle src="../PINE/needles/showHide.html"></needle> -->
	<needle src="../PINE/needles/knobsAndSliders.html"></needle>



	<script type="text/javascript" src="RobotSoul.js"></script>
	<script type="text/javascript" src="RobotSoul_IOHelper.js"></script>
	<script type="text/javascript" src="RobotSoul_Tracks.js"></script>
	<script type="text/javascript" src="RobotSoul_Devices.js"></script>
	<script type="text/javascript" src="RobotSoul_DeviceRack.js"></script>

	<needle src="cableOverlay.html"></needle>
	<needle src="devices/basic/Oscillator.html"></needle>
	<needle src="devices/MidiFreq.html"></needle>
	<needle src="devices/basic/Gain.html"></needle>
	<needle src="devices/basic/Interval.html"></needle>
	<needle src="devices/basic/Knob.html"></needle>
	<needle src="devices/basic/LinearRange.html"></needle>

	<script type="text/javascript">

		// var audioCtx = new (window.AudioContext || window.webkitAudioContext)();
		// var oscillator = audioCtx.createOscillator();
		// oscillator.type = 'triangle';
		// oscillator.frequency.value = 300; // value in hertz
		// oscillator.connect(audioCtx.destination);
		// oscillator.start();
		
	// var loadMe = '{"tracks":{"0":{"ID":0,"name":"Track 0","deviceRacks":[0]}},"devices":{"masters":{"0":"DeviceRack","1":"Oscillator","2":"MidiToFreq","3":"Gain","4":"Interval","5":"Knob","6":"LinearRange"},"clones":{"0":{"ID":0,"masterID":0},"1":{"ID":1,"masterID":2},"2":{"ID":2,"masterID":1},"3":{"ID":3,"masterID":5},"4":{"ID":4,"masterID":3}}},"connections":{"0":{"ID":0,"output":{"name":"midi","device":0},"input":{"name":"midi_in","device":1}},"1":{"ID":1,"output":{"name":"frequency_out","device":1},"input":{"name":"osc_frequency","device":2}},"2":{"ID":2,"output":{"name":"out","device":3},"input":{"name":"gain","device":4}},"3":{"ID":3,"output":{"name":"wave_out","device":2},"input":{"name":"in","device":4}}}}'
	var loadMe = {
		devices : {
			templates : {
				// nextID : 3,
				byID : {
					0 : "DeviceRack",
					1 : "MidiToFreq",
					2 : "Oscillator",
					3 : "Gain",	
					4 : "Knob"
				}
			},
			clones : {
				nextID : 5,
				list : [
					{	ID : 0,		template : 0 },
					{	ID : 1,		template : 1 },
					{	ID : 2,		template : 2 },
					{	ID : 3,		template : 3 },
					{	ID : 4,		template : 4 },
				]
			}
		},

		racks : [
			{
				ID: 0,
				devices : [1, 2, 3, 4]
			}
		],

		tracks : [
			{
				ID: 0,
				racks : [0]
			}
		],

		connections : [
			{	ID : 0,		
				output : {
					device : 0,
					name : "midi"
				},
				input : {
					device : 1,
					name : "midi_in"
				}
			},

			{	
				ID : 1,		
				output : {
					device : 1,
					name : "frequency_out"
					
				},
				input : {
					device : 2,
					name : "osc_frequency"
				}
			},
			{	ID : 2,		
				output : {
					device : 2,
					name : "wave_out"
				},
				input : {
					device : 3,
					name : "in"
				}
			},
			{	ID : 3,		
				output : {
					device : 4,
					name : "out"
				},
				input : {
					device : 3,
					name : "gain"
				}
			}
		]
	}



	PINE.ready(function(){
		RS.load(loadMe);
		El.byId("all_tracks").FNS.update();	
		viewTrackDetails(0);
	});
	
	


	function viewTrackDetails(trackId) {
		
		El.byId("details").FNS.changeSrc("modules/Rack.html?id="+trackId);
	}

	// PINE.ready(function() {
	
	// });
		
	</script>
	
	
</head>






<body>


<!-- <button onclick="Noodler()">Noodles</button> -->

<view src="nosrc" id="details">

</view>


<!-- <trackList spawner="TRACKS.list">
	<trackItem spawn changeSrc="modules/TrackDevices.html?id={{TRACKS.list[i].ID}}" changeSrcTarget="details">
		<solo>S</solo>
		<mute>M</mute>
		{{TRACKS.list[i].name}}
	</trackItem>
</trackList> -->


<trackList id="all_tracks" spawner="TRACKS.list">
	<trackItem spawn changeSrc="modules/Rack.html?id={{TRACKS.list[i].ID}}" changeSrcTarget="details">
		<solo>S</solo>
		<mute>M</mute>
		{{TRACKS.list[i].name}}
	</trackItem>
</trackList>






</body>






<style>
body {
	/*background: #30120E;*/
	/*background: #453B75;*/
	color: #FFF;
	font-family: arial;
}
	
	body.hide_cursor, body.hide_cursor * {
		cursor: none !important;
	}


* {
	border-color: #222;
	border-width: 2px;
}

* [changeSrc] {
	cursor: pointer;
}


rsRange {
	display: inline-block;
	position: relative;
	text-align: center;
	width: 50px;
	overflow: hidden;
}
	rsKnob, knob {
		display: inline-block;
		cursor: row-resize;
		height: 25px;
		width: 25px;
		border-radius: 400px;
		/*background: red;*/
		background-image: url("public/images/knob.png");
	}

	rsRange rsLabel {
		display: block;
		/*font-size: 10px;*/
	}


tracklist {
	position: absolute;
	left: 400px;
	height: 100%;
	right: 0px;
	/*background: #453B75;*/
	background-color: #4A465C;
	border-left-style: solid;
	box-shadow: 1px 1px 15px #1117;
	background-image: url("public/images/misty_robot.png");
}
	trackItem {
		display: block;
		border-bottom-style: solid;
	}

		trackItem solo, trackItem mute {
			display: inline-block;
			text-align: center;
			height: 30px;
			width: 30px;
			line-height: 30px;
			border-radius: 5px;
			border-style: solid;
			color: #333;
		}

			trackItem solo {
				background: #c6b326;
			}

			trackItem mute {
				background: #c08b2b;;
			}

#details {
	position: absolute;
	top: 0px;
	left: 0px;
	/*background: #444;*/
	background: #56755B;
	height: 100%;
	width: 400px;
	overflow: scroll;
}


needle {
	display: none;
}






</style>






</html>