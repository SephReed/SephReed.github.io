<!DOCTYPE html>
<html>
<head>
	<title>Flat Story - 2D Game Maker</title>
	<link rel="stylesheet" type="text/css" href="../public/css/init.css">
	<link rel="stylesheet" type="text/css" href="index.css">

	<script type="text/javascript" src="../PINE/PINE_Core_4.8.js"></script>
	<script type="text/javascript" src="FLAT.js"></script>

	
	<needle src="WebFileBridge.js" needAlias="FILE_BRIDGE"></needle>
	<needle src="../PINE/tools/ELATE.js" needAlias="ELATE"></needle>
	
	<!-- PINE NEEDLES -->
	<script type="text/javascript" src="../PINE/needles/easyStyleVar.js"></script>
	<needle src="../PINE/PINE_Var.js"></needle>
	<needle src="../PINE/PINE_Needles.js"></needle>
	<needle src="../PINE/needles/resizeHandle.html"></needle>
	<needle src="../PINE/needles/selectableList.html"></needle>
	<needle src="../PINE/needles/fileBrowser.html"></needle>
	<needle src="../PINE/needles/tempFeedback.html"></needle>
	<needle src="../PINE/needles/modal.html"></needle>
	


	<!-- FLAT.Worlds RESOURCES -->
	<needle src="basicInterfaces.html"></needle>


	<needle src="Resources.html"></needle>
		<needle src="LogicalResources.html"></needle>
		<needle src="VisualResources.html"></needle>
	<needle src="EditorUI.html"></needle>
		<needle src="guiModules/CanvasStack.html"></needle>
		<needle src="guiModules/ChipDrawTools.html"></needle>
		<needle src="guiModules/ChipPallette.html"></needle>
		<needle src="guiModules/ResourceBrowser.html"></needle>
	<needle src="Tools.html"></needle>
	<!-- <needle src="Options.html"></needle> -->

	<script type="text/javascript">
		// PINE.StyleVars.set("panelBase", "#46514E");
		// PINE.StyleVars.set("panelBorderWidth", "3px");
		// PINE.StyleVars.set("panelBorderColor", "#333");
		// PINE.StyleVars.set("backdropColor", "#2A2A2A");
		// PINE.StyleVars.set("panelTextColor", "#EFD1A5");

		// FLAT.setUI("FlatEditor");
		FLAT.defaultInit("test");
		


		// var loadEvents = ["Resources", "LogicalResources", "VisualResources", 
		// 	"WorldEditor", "Draw", "DrawTools", "FILE_BRIDGE", "ELATE"]

		// var onLoad = function() {
			
		// }


		(function initLoadingInteraction() {
			var fullScreenFn = function(event) {
				document.body.mozRequestFullScreen();
				event.preventDefault();
				return false;
			}

			U.docReady(function(){
				document.body.addEventListener("click", fullScreenFn)
			});

			window.setTimeout(function(){
				PINE.signalNeedMet("LOAD_TIME_MIN")
			}, 1000)

			PINE.waitForNeed(["FLAT_DISPLAYED", "LOAD_TIME_MIN"], function() {
				document.body.classList.add("loaded");
				document.body.classList.remove("loading");

				document.body.removeEventListener("click", fullScreenFn);
			});
		})()
		
	</script>

<!-- 	<script type="text/javascript">
		PINE.createNeedle("[scalableCanvas]", function() {
			this.addOp(function(state) {
				var domNode = state.domNode;
				var updateSizing = function() {
					domNode.width = domNode.offsetWidth;
					domNode.height = domNode.offsetHeight;
				}
				El.onSizeChange(domNode, updateSizing);
				updateSizing();
			});
		});
	</script>
	 -->



	<style>
		@keyframes loadBarGrow {
			0% { width: 50px; }
			100% { width: 100%; }
		}

		appinitLoadbar {
			display: block;
			position: absolute;
			top: 0px;
			left: 0px;
			overflow: hidden;
			white-space: nowrap;
			animation: loadBarGrow 7s;
			animation-direction: alternate;
			animation-iteration-count: 2;
			animation-fill-mode: forwards;
		}

			.loaded appinitLoadbar {
				display: none;
			}

		fullScreenInfo {
			position: absolute;
			display: block;
			text-align: center;
			font-size: 30px;
			left: 50%;
			top: 50%;
			transform: translate(-50%, -50%);
		}

			fullScreenInfo small {
				font-size: 15px;
			}

			.loaded fullScreenInfo {
				display: none;
			}
	</style>
	

</head>
<body class="loading">
	<appinitLoadbar>Loading.................................<!--
	-->.....................................................<!--
	-->.....................................................<!--
	-->.....................................................<!--
	-->.....................................................</appinitLoadbar>
	<fullscreenInfo>Click anywhere to fullscreen<br><small>(during load)</small></fullscreenInfo>
	<app>
		
	</app>
</body>


<style easyStyleVar>
html {
	--panelBase: #46514E;
	/*--semiTranslucentPanelBase: #46514E;*/
	--panelTextColor: #EFD1A5;
	--panelBorderWidth: 3px;
	--panelBorderColor: #333;
	--backdropColor: #2A2A2A;

	--linkColor: #0DA;

	--verySoftDarken: rgba(30,30,30,0.1);
	--softDarken: rgba(30,30,30,0.3);
	--medDarken: rgba(30,30,30,0.5);
	--heavyDarken: rgba(30,30,30,0.7);
	--veryHeavyDarken: rgba(30,30,30,0.9);

	--vignette: inset 4px 4px 15px rgba(0,0,0,0.5);
	--medShadow: 2px 2px 15px rgba(0,0,0,0.2);

	--toolBarBase: #444;
	--toolOutline: rgba(250,250,250,0.3);

	--topbarHeight: 20px;

	--noSoloOpacity: 0.5;
}

</style>





</html>