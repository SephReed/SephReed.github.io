<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />

	<script src="public/js/zepto.js"></script>
	<script src="PINE/PINE_Core.js"></script>

	<!-- <script> PINE.disable(["[PNVATT]", "INCLUDE"]); </script> -->

	<script src="PINE/PINE_Var.js"></script>
	<script src="PINE/PINE_Needles.js"></script>
	<!-- <script src="../handle_chooser/PINE_Template.js"></script> -->

    <link rel="stylesheet" type="text/css" href="Anonchat/public/styles/fallback.css" />

    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/1.18.2/plugins/CSSPlugin.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/1.18.2/easing/EasePack.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/1.18.2/TweenLite.min.js"></script>

	<pine>
		<needle src="Anonchat/needles/Needle_CommentBox.html"></needle>
        <needle src="PINE/needles/peephole.html"></needle>
        <needle src="PINE/needles/overlay.html"></needle>
        <needle src="PINE/needles/bgimg.html"></needle>

        <include id="style_include" src="{{style_include_cookie}}"></include>
	</pine>
</head>


<style>

html {
    box-sizing: border-box;
    font-family: arial;
}

*, *:before, *:after {
  	box-sizing: inherit;
  	margin: 0px;
	padding: 0px;
}

img {
	outline : none;
}



#back_btn {
    position: fixed;
    top: 0px;
    background-color: #AAA;
    color: #222;
    border-radius: 10px;
    border: 1px solid rgba(0,0,0,0.3);
    padding: 10px;
    cursor: pointer;
}

heading {
    display: block;
    height: 50px;
    font-size: 30px;
    text-align: center;
}


/*CONSTANTS*/
postlist {
	width: 100%;
}

post {
	display: block;
}

changeSrc {
    cursor: pointer;
}

/*THEMES*/



post {
	border-bottom: 1px solid rgba(0,0,0,0.2);
	padding: 10px;
}

commentbox {
	width: 100%;
	height: 100px;
}


</style>

<script type="text/javascript">
    SESSION_CACHE = {};
    SESSION_CACHE.topic_tags = [];
    SESSION_CACHE.location = {};
    SESSION_CACHE.location.lat = 0;
    SESSION_CACHE.location.lng = 0;

    PATH_TO_SERVER = "http://108.238.241.202:8080";

    if(window.location.href.indexOf("file://") != -1)
        PATH_TO_SERVER = "http://localhost:8080";


    var style_include_cookie = U.getCookie("style_include") || "Anonchat/public/styles/empty.css";




    PINE.ready(function() {
        // console.log(document.getElementById("content_view").FNS)
        // alert(document.getElementById("content_view").FNS)

        var back_btn = document.getElementById("back_btn");

        document.getElementById("content_view").FNS.changeSrc.add(function(src) {
            var oldView = U.attr(this, "src");

            if(src.indexOf("views/settings") != -1) {
                back_btn.setAttribute("src", "Anonchat/views/map.html");
                back_btn.innerHTML = "<- Map";
            }
            else if(src.indexOf("views/createWall") != -1) {
                back_btn.setAttribute("src", "Anonchat/views/map.html");
                back_btn.innerHTML = "<- Map";
            }
            else if(src.indexOf("views/map") != -1) {
                back_btn.setAttribute("src", "Anonchat/views/settings.html");
                back_btn.innerHTML = "Settings";
            }
            else if(src.indexOf("views/wallTopics") != -1) {
                back_btn.setAttribute("src", "Anonchat/views/map.html");
                back_btn.innerHTML = "<- Map";
            }
            else if(src.indexOf("views/posts") != -1) {
                back_btn.setAttribute("src", oldView);
                back_btn.innerHTML = "<- Wall";
            }
        }, "before");




        document.getElementById("style_include").FNS.changeSrc.add(function(src) {
            U.setCookie("style_include", src);
        }, "after");
    });



</script>


    <!-- *********************
    *                       *
    *       BEGIN BODY      *
    *                       *
    ************************-->
    <body><pine>


        <content>
            <!-- <button id="changePage" onclick="changePage()">Change Page</button> -->
            <changeSrc id="back_btn" target="content_view" src="Anonchat/views/settings.html">Settings</changeSrc>
            
            <include id="content_view" src="Anonchat/views/map.html"></include>
            
        </content>
    </pine></body>
</html>







