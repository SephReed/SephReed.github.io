<!DOCTYPE html>
<html>
<head>
	<title></title>
	<script src="../PINE_Core_4.8.js"></script>
	<script type="text/javascript">
		// var Namable = function () {
		// 	this.name = "noName"
		// }
		// Namable.prototype.setName = function(newName) {
		// 	this.name = newName;
		// };


		// var Likeable = function () {
		// 	this.likes = 42;
		// }
		// Likeable.prototype.like = function() {
		// 	this.likes++;
		// };


		// // var Hat = function() {}


		// // Hat.prototype.constructor = function() {
		// // 	alert("woo");
		// // }

		// var inherit = function(beneficiary, benefactors) {
		// 	if(beneficiary.prototype.benefactors == undefined) {
		// 		beneficiary.prototype.benefactors = [];

		// 		var originalConstructor = beneficiary.prototype.constructor;
		// 		beneficiary.prototype.constructor = function() {
		// 			originalConstructor.apply(beneficiary, arguments);

		// 			console.log("constructor run");

		// 			for(var i in beneficiary.prototype.benefactors) {
		// 				console.log(beneficiary.prototype.benefactors[i]);
		// 				beneficiary.prototype.benefactors[i].constructor.call(beneficiary);
		// 			}
		// 		}
		// 	}

		// 	beneficiary.prototype.benefactors.concat(benefactors);

		// 	for(var i in benefactors) {
		// 		var grandpa = benefactors[i];
		// 		for(var key in grandpa.prototype) {
		// 			if(key !== "constructor")
		// 				beneficiary.prototype[key] = grandpa.prototype[key];
		// 		}
		// 	}
		// }





		// var test;
		// U.docReady(function() {
		// 	test = El.byID("test");
		// 	Likeable.call(test);
		// 	test.like = Likeable.prototype.like;
		// })

		// // inherit(Hat, [Namable, Likeable]);

		
	</script>

	<!-- <script type="text/javascript">

		// var Namable = function() {
		// 	this.name = "anon";
		// }

		// Namable.prototype.setName = function(newName) {
		// 	this.name = newName;
		// 	this.domNode.textContent = this.name;
		// }

		// Augmentations


		var p_namable = createNeedle("[namable]");
		// p_namable.PVARS.push("name");
		p_namable.FNS["setName"] = function(newName) {
			this.PVARS.name = newName;
			this.domNode.textContent = this.PVARS.name;
			var event = new Event("nameChange", {"bubbles":false, "cancelable":true});
			this.domNode.dispatchEvent(event);
		}

		p_namable.FNS["randomName"] = function() {
			this.FNS.setName("randomName");
		}

		p_namable.addInitFn(PINE.ops.COMMON, function() {
			this.FNS.setName("anon");
		});


		

		Needle = function(matchCase) {
			this.matchCase = matchCase;
			this.FNS = {};
			this.PVARS = [];
			this.inits = {};
		}

		Needle.prototype.addInitFn = function(opType, fn) {
			if(this.inits[opType] == undefined)
				this.inits[opType] = [];

			this.inits[opType].push(fn);
		}


		Needle.prototype.inject = function(domNode) {
			

			var needle = this;
			var instance = {};
			instance.domNode = domNode;
			instance.needle = needle;
			instance.PVARS = domNode.PVARS;
			instance.FNS = domNode.FNS;

			for(var key in needle.FNS) {
				if(domNode.FNS[key] == undefined) {
					domNode.FNS[key] = function() {
						return needle.FNS[key].apply(instance, arguments);
					}
				}
				else PINE.err("adding an already taken FNS name "+key, domNode, needle);
			}
			for(var i in needle.PVARS) {
				domNode.PVARS[key] = instance[key];
				// let key = needle.PVARS[i];
				// Object.defineProperty(domNode.PVARS, "key", {
				// 	get: function() { return instance[key]; },
				// 	set: function(newVal) { instance[key] = newVal; },
				// 	writable: true,
				//   	enumerable: true,
				//   	configurable: true
				// }
			}

			domNode.__pine__.instances.push(instance)
		}






		var Needle = function(matchCase, extendable) {
			this.matchCase = matchCase;
			this.extendable = extendable;
		}

		Needle.prototype.applyTo = function(domNode) {
			var needle = this;
			var instance = {};
			instance.domNode = domNode;

		};

		Needle.prototype.applies = function(domNode) {
			var domNodeHasMatchCase = true;
			return domNodeHasMatchCase;
		}



		El.extendObject = function(domNode, objects) {
			if(typeof objects == "function")
				objects = [objects];

			for(var i in objects) {
				var extendMe = objects[i];

				
				for(var att in extendMe.prototype) {
					if(att !== "constructor") {
						if(domNode[att] !== undefined)
							PINE.err("element already has attribute "+att, domNode);

						else domNode[key] = extendMe.prototype[key];
					}


				}
				
				
			}
		}


		var test;
		U.docReady(function() {
			test = El.byID("test");
			El.extendObject(test, Namable);
			test.setName("testy");
		});



		
	</script> -->
</head>
<body>
	<div id="test">
		<span></span>
		<span></span>
	</div>
	
</body>

<style type="text/css">

</style>
</html>