<script type="text/javascript">
	


PINE.createNeedle("[fileChooser]", function(choose) {

	choose.addAttArg("onChoice", ["onFileChoose", "onChoose"], "string");

	choose.addInitFn(function() {
		var job = this;
		var initMe = job.domNode;

		var browser = document.createElement("input");
		browser.type = "file";
		browser.classList.add("hidden_file_input");

		El.makeSizeCalculatable(initMe);
		initMe.appendChild(browser);
		
		browser.addEventListener("change", function(event) {
			var file = event.target.files[0];
			if (!file) return;
			
			else {
				var onFileChange = job.attArg.onChoice;
				if(onFileChange != undefined) {
					window[onFileChange](file);
				}
			}
		});
	});
});

</script>

<style>
.hidden_file_input {
	position: absolute;
	top: 0px;
	left: 0px;
	height: 100%;
	width: 100%;
	opacity: 0;
}
</style>