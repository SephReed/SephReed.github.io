<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="utf-8"/>

	<script src="../public/js/zepto.js"></script>
	<script src="../handle_chooser/PINE_Core.js"></script>

	<!-- <script> PINE.disable(["[PNVATT]", "INCLUDE"]); </script> -->

	<script src="../handle_chooser/PINE_Var.js"></script>
	<script src="../handle_chooser/PINE_Needles.js"></script>
	<!-- <script src="../handle_chooser/PINE_Template.js"></script> -->

	<pine>
		<needle src="needles/Needle_CommentBox.html"></needle>
        <needle src="needles/peephole.html"></needle>
        <include src="public/styles/fallback.css"></include>

        <include id="style_include" src="{{style_include_cookie}}"></include>
	</pine>
</head>


<style>

html {
    box-sizing: border-box;
    font-family: arial;
}

*, *:before, *:after {
  	box-sizing: inherit;
  	margin: 0px;
	padding: 0px;
}

img {
	outline : none;
}



#back_btn {
    position: fixed;
    top: 0px;
    background-color: rgba(250,250,250,0.5);
    border-radius: 10px;
    border: 1px solid rgba(0,0,0,0.3);
    padding: 2px;
    cursor: pointer;
}





/*CONSTANTS*/
postlist {
	width: 100%;
}

post {
	display: block;
}


/*THEMES*/



post {
	border-bottom: 1px solid rgba(0,0,0,0.2);
	padding: 10px;
}

commentbox {
	width: 100%;
	height: 100px;
}


</style>

<script type="text/javascript">
    SESSION_CACHE = {};
    SESSION_CACHE.topic_tags = [];

    PATH_TO_SERVER = "http://108.238.241.202:8080";

    if(window.location.href.indexOf("file://") != -1)
        PATH_TO_SERVER = "http://localhost:8080";


    var style_include_cookie = U.getCookie("style_include") || "public/styles/empty.css";


    // var rotater = 0;
    // function changePage() {

    //     console.log("CHANGING VIEW")

    //     rotater++;
    //     rotater %= 3;

    //     if(rotater == 0)
    //         $("include")[0].FNS.changeSrc("views/posts.html?wall=0");

    //     else if(rotater == 1)
    //         $("include")[0].FNS.changeSrc("views/map.html");                

    //     else
    //         $("include")[0].FNS.changeSrc("views/wallTopics.html");

        
    // }





    PINE.ready(function() {
        // console.log(document.getElementById("content_view").FNS)
        // alert(document.getElementById("content_view").FNS)

        var back_btn = document.getElementById("back_btn");

        document.getElementById("content_view").FNS.changeSrc.add(function(src) {
            var oldView = U.attr(this, "src");

            if(src.indexOf("views/settings") != -1) {
                back_btn.setAttribute("src", "views/map.html");
            }
            else if(src.indexOf("views/map") != -1) {
                back_btn.setAttribute("src", "views/settings.html");
            }
            else if(src.indexOf("views/wallTopics") != -1) {
                back_btn.setAttribute("src", "views/map.html");
            }
            else if(src.indexOf("views/posts") != -1) {
                back_btn.setAttribute("src", oldView);
            }
        }, "before");




        document.getElementById("style_include").FNS.changeSrc.add(function(src) {
            U.setCookie("style_include", src);
        }, "after");
    });



</script>


    <!-- *********************
    *                       *
    *       BEGIN BODY      *
    *                       *
    ************************-->
    <body><pine>


        <content>
            <!-- <button id="changePage" onclick="changePage()">Change Page</button> -->
            <changeSrc id="back_btn" target="content_view" src="views/settings.html">BACK</changeSrc>
            
            <include id="content_view" src="views/map.html"></include>
            
        </content>
    </pine></body>
</html>







